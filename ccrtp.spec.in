Summary: ccrtp - a Common C++ class framework for RTP packets
Name: ccrtp1
Version: @VERSION@
Release: 3
Group: Development/Libraries
URL: http://www.gnu.org/software/ccrtp
Source: ftp://ftp.gnu.org/gnu/ccrtp/ccrtp-%{PACKAGE_VERSION}.tar.gz
Prefix: %{_prefix}
Copyright: GPL
BuildRoot: %{_tmppath}/rtp-root
Packager: David Sugar <dyfet@ostel.com>
Requires: commoncpp2 >= 0.99.0

%package devel
Requires: ccrtp1, commoncpp2-devel
Group: Development/Libraries
Summary: headers and link libraries

%description
The ccrtp package offers a generic framework for sending and receiving of
realtime streaming data over UDP packets by the use of send and receive
packet queues.

%description devel
This package holds documentation, header files, and static link libraries
for building applications that use GNU ccScript.

%prep
rm -rf $RPM_BUILD_ROOT

%setup -n ccrtp-%{PACKAGE_VERSION}
./configure --prefix=%{_prefix} --mandir=%{_mandir} --infodir=%{_infodir}

%build
uname -a|grep SMP && make -j 2 || make

%install
mkdir -p $RPM_BUILD_ROOT/%{_mandir}/man3
make prefix=$RPM_BUILD_ROOT/%{_prefix} \
	mandir=$RPM_BUILD_ROOT/%{_mandir} \
	infodir=$RPM_BUILD_ROOT/%{_infodir} install
make prefix=$RPM_BUILD_ROOT/%{_prefix} \
	mandir=$RPM_BUILD_ROOT/%{_mandir} man

%files
%defattr(-,root,root,0755)
%{_prefix}/lib/libcc*so*

%files devel
%defattr(-,root,root,0755)
%doc AUTHORS COPYING NEWS README TODO ChangeLog
%{_prefix}/lib/libcc*a
%{_prefix}/include/cc++2/cc++/phone.h
%{_prefix}/include/cc++2/cc++/rtp
#%{_mandir}/man3/*.3cc*		conflicts with commonc++ socket.h page
#%{_infodir}/info/ccrtp*

%clean
rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig -n @libdir@

%postun
/sbin/ldconfig -n @libdir@

