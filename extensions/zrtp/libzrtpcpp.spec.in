Summary: "libzrtpcpp" - a ccrtp extension for zrtp/Zfone support
Name: libzrtpcpp
Version: @VERSION@
Release: 1
Epoch: 0
License: GPL
Group: Development/Libraries
URL: http://www.gnu.org/software/commoncpp/commoncpp.html
Source0: ftp://ftp.gnu.org/gnu/cccrtp/libzrtpcpp-%{PACKAGE_VERSION}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
Requires: ccrtp >= 1.5.0
Requires: @PACKAGE_REQ@
BuildRequires: ccrtp-devel >= 1.5.0
BuildRequires: pkgconfig
BuildRequires: libstdc++-devel
BuildRequires: @BUILD_REQ@

%package devel
Group: Development/Libraries
Summary: Headers and static link library for libzrtpcpp.
Requires: %{name} = %{epoch}:%{version}-%{release}
Requires: ccrtp-devel >= 1.5.0
Requires: @BUILD_REQ@

%description

This library is a GPL licensed extension to the GNU RTP Stack (GNU ccrtp).
This extension offers a C++ implementation of Phil Zimmermann's ZRTP 
specification. The current release is based on 
draft-zimmermann-avt-zrtp-04.txt.

This implementation was tested to work with Phil's Zfone implementation
of the ZRTP spefication. Applications that use GNU ccrtp can use this
library to use ZRTP and to encrypt the RTP (not RTCP) communication. 

This release does not support preshared mode specified in the draft.

%description devel
This package provides the header files, link libraries, and
documentation for building applications that use libzrtpcpp.

%prep
%setup
%build
%configure
make %{?_smp_mflags} LDFLAGS="-s" CXXFLAGS="$RPM_OPT_FLAGS"

%install
%makeinstall
rm $RPM_BUILD_ROOT/%{_libdir}/libzrtpcpp.la
rm -rf %{buildroot}/%{_infodir}

%clean
rm -rf %{buildroot}

%files
%defattr(-,root,root)
%doc AUTHORS COPYING README
%{_libdir}/*.so.*

%files devel
%defattr(-,root,root)
%{_libdir}/*.a
%{_libdir}/*.so
%{_libdir}/pkgconfig/*.pc
%{_includedir}/libzrtpcpp/*.h

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%changelog
* Tue Dec 11 2007 - werner.dittmann@t-online.de
- this is the first spec file for version 1.x.x
- remove the .la file in devel package
- use default file atttribute instead of 755